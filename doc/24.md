---
layout: post
title:  "跨境防关联-硬件指纹: Canvas篇"
keywords: 店卫士
description: 跨境防关联-硬件指纹: Canvas篇 
page_excerpts: true
---
# 跨境防关联-硬件指纹: Canvas篇
Canvas是一种HTML5 API，用于在网页上绘出2D图像和动画。
除了上述功能之外，Canvas也可以作为浏览器指纹识别的附加熵。根据Englehardt和Narayanan在普林斯顿大学的一项研究（2016），超过5%的网站使用Canvas来进行指纹识别。
综上，Canvas通过命令浏览器绘制一个隐藏的Canvas图像来实现指纹识别。在不同的机器上，这张图片的绘制结果略有不同；但如果机器相同，则图像也相同。图像被绘出后，它会被转换成一个哈希字符串, 通过比较这个哈希值来进行关联检测。
有三种不同的操作模式来控制浏览器文件的Canvas指纹：噪声模式、关闭模式和封锁模式
## 噪声模式（Noise mode）
当网站通过浏览器请求读取Canvas函数时，噪声模式下的Canvas屏蔽算法会中途拦截它，并向读出添加一个随机但始终会保持一致的噪声。为了更好地理解其工作原理，我们可以将其类比为一个“语音修正器”。当您使用一个有着特定预设的语音修饰器时，它会改变你的声音，使它与原来的声音有很大的区别，但随着时间的推移这种变化将保持一致。
由于读出添加了随机的噪声，如果网站应用了数据分析技术，便会发现指纹是100%唯一的。
## 关闭模式（Off Mode）
网站将会得到您设备的真实Canvas指纹
请注意！在真实环境中，Canvas指纹的哈希值并不是唯一的，因为世界各地有着与您的设备相同的副本。所以如果您显示了真实的Canvas指纹，您只会被划分到使用同一硬件的用户群。此外，通过变更其他指纹，您可以增加网站将您的浏览器配置文件视为单独身份的熵值。

我们发现了一种进一步降低浏览器文件熵值、使其更好地处于正常用户分布范围内的方法，即在Mac电脑上运行Multilogin。因为Mac都拥有非常相似的出厂设置、Canvas指纹。大多数情况下，同样的模型会拥有相同的哈希值。
## 封锁模式（Block mode）

封锁模式完全禁止网站读取Canvas。当网站试图从浏览器配置文件中读出已被设置为封锁模式的Canvas时，返回的值将为空。
这种情况处理方式完全取决于网站自身的权衡。然而，在检索Canvas对象数据的过程中发生浏览器错误的情况下，这样的事件也可能发生在没有专心隐藏自己的Canvas指纹的用户身上。
## 在多台电脑上打开浏览器配置文件
请注意！如果您创建了一个将Canvas设置为噪声模式，并且在装有不同硬件的多个设备上打开它，网站就会知道Canvas的哈希值在多平台上运行时并不是持续的。

虽然添加的噪声是持续的，然而它在运行的设备上起到的只是过滤器的作用。所以，如果设备改变了，那么读出也会改变
如果您需要在多个设备上获得不变的读出，您可以尝试以下几种解决方法：
1. 在硬件指纹设置为噪声模式的情况下，在配置相同的虚拟机（VM）或虚拟专用服务器（VPS）上运行店卫士。由于这些设备是由同一种方式设置的，添加噪声后的Canvas指纹在多个设备上会保持一致。
2. 在有着相同硬件、驱动程序、操作系统的同一PC型号上运行店卫士。由于这些设备有着同样的硬件设置，被掩蔽后的系统指纹在多设备上会保持一致。
3. 在同样的Mac电脑上运行店卫士。同样的原理，同上述一样，这有助于团队更好地融合。
